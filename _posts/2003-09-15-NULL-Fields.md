---
layout: default
title: "NULL Fields"
permalink: /2003/09/15/NULL-Fields/
---

<p>The way to do that would be to put IF tests literelly inside your CFQUERY to test whether to store a NULL or the form field value, as in:<br/>
</p><ul><pre><cfquery datasource="..."></cfquery><pre>&lt;CFQUERY Datasource=&quot;...&quot;&gt;<br/>&nbsp;&nbsp;UPDATE tablename<br/>&nbsp;&nbsp;SET column =<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;CFIF isdefined(&quot;form.fieldname&quot;) and form.fieldname is not &quot;&quot;&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'#form.fieldname#'<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;CFELSE&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;null<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/CFIF&gt;<br/>&nbsp;&nbsp;WHERE ... <br/>&lt;/CFQUERY&gt;  </pre></pre></ul>
<p>Of course, you need to fill out the UPDATE statement to reference all the columns you mean to update, and repeat that test for an empty string for each column that has this property set, and finish the requisite WHERE clause so that you update only the record intended. </p>
<p>Notice the use of null in the CFELSE clause. That's literally the word &quot;null&quot; and it's intentionally written there without quotes. The database (and SQL) know that that means you intend to store nululthere, not a word composed of the string &quot;null&quot;. Remember, though, that you can't store null if the column is marked as &quot;required&quot; in the database. (While numeric columns don't have the &quot;allow zero length&quot;, they do have the &quot;required&quot; property so this is an important point for those, as well.)</p>
<p>If the column is not set to &quot;allow zero length&quot; but is required, then you simply have to store something in the column. Neither the empty string nor null are allowed. In that case, use a test and message to the user to prevent them submitting the form if no value is presented (the &quot;hidden field&quot; technique of setting &quot;_required&quot; should work.</p>
<p>Finally, note that the &quot;allow zero Length&quot; property works independently of the &quot;required&quot; property. &quot;Required&quot; determines only whether a Null value is valid for the field. If the &quot;allow zero Length&quot; property is set to Yes, a zero-length string will be a valid value for the field regardless of the setting of the &quot;required&quot; property.<br/></p><p>UPDATE:<br/></p><p>A better solution is...<br/></p><p>&lt;cfqueryparam cfsqltype=&quot;cf_sql_char&quot; value=&quot;#form.fieldname#&quot; null=&quot;#YesNoFormat(NOT Len(Trim(form.fieldname)))#&quot;/&gt;</p>Some more thoughts are captured <a href="http://www.waterswing.com/blog/index.cfm?mode=entry&amp;entry=E923E84D-B512-36C2-3AF80E1A01A7B594" target="_blank">here</a>, including a solution for MySQL.<br type="_moz"/>